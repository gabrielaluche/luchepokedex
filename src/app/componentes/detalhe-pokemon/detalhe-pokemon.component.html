<div class="modal-content-container" [ngStyle]="getStyleColors(pokemon)">
  <div class="pokemon-header">
    <h2 class="pokemon-name">{{ pokemon?.info?.name | titlecase }}</h2>
    <span class="pokemon-id">#{{ pokemon?.info?.id | padId }}</span>
  </div>
  <div *ngIf="pokemon?.info" class="pokemon-image-container">
    <img
      [src]="pokedexService.getPokemonImageUrl(pokemon.info.id)"
      class="pokemon-image"
      alt="Imagem do {{ pokemon?.info?.name }}"
      appImageFallback
    />
  </div>
  <div class="pokemon-details-card">
    <div class="pokemon-types">
      <span *ngFor="let typeInfo of pokemon?.info?.types" class="pokemon-type-badge">
        {{ typeInfo.type.name | titlecase }}
      </span>
    </div>

    <ul ngbNav #nav="ngbNav" class="nav-tabs-custom" [(activeId)]="activeTabId" (navChange)="onTabChange($event)">
      <li [ngbNavItem]="1">
        <button ngbNavLink>About</button>
      </li>
      <li [ngbNavItem]="2">
        <button ngbNavLink>Stats</button>
      </li>
      <li [ngbNavItem]="3">
        <button ngbNavLink>Evolution</button>
      </li>
    </ul>

    <div class="mt-3 tab-content-container">
      <div *ngIf="isLoadingTab" class="text-center p-3">
        <p>Carregando aba {{ activeTabId }}...</p>
      </div>

      <div *ngIf="!isLoadingTab && tabContent">

        <div *ngIf="activeTabId === 1">
          <p><strong>Species:</strong> {{ tabContent.species }}</p>
          <p><strong>Height:</strong> {{ tabContent.height }} m</p>
          <p><strong>Weight:</strong> {{ tabContent.weight }} kg</p>
          <p><strong>Abilities:</strong> <span class="text-capitalize">{{ tabContent.abilities }}</span></p>
        </div>

        <div *ngIf="activeTabId === 2">
          <ul class="list-unstyled">
            <li *ngFor="let stat of tabContent.stats" class="stat-item text-capitalize">
              <strong>{{ stat.name }}:</strong> {{ stat.value }}
            </li>

            <hr>

            <li class="stat-item">
              <strong>Total:</strong> {{ tabContent.total }}
            </li>
          </ul>

          <div class="type-defenses mt-3">
              <h6>Type Defenses</h6>
              <p>The effectiveness of each type on this Pokémon.</p>
              <div>
                  <strong>Weaknesses:</strong>
                  <span *ngFor="let type of tabContent.typeDefenses.weaknesses" class="pokemon-type-badge">
                      {{ type | titlecase }}
                  </span>
              </div>
              <div class="mt-2">
                  <strong>Resistances:</strong>
                  <span *ngFor="let type of tabContent.typeDefenses.resistances" class="pokemon-type-badge">
                      {{ type | titlecase }}
                  </span>
              </div>
          </div>

        </div>
        <div *ngIf="activeTabId === 3">
          <div *ngIf="tabContent.line; else noEvolution" class="evolution-line">
            <div *ngFor="let evo of tabContent.line" class="evolution-step text-center">
              <img [src]="evo.imageUrl" alt="{{ evo.name }}" width="80" height="80" appImageFallback />
              <p class="text-capitalize mt-1">{{ evo.name }}</p>
            </div>
          </div>
          <ng-template #noEvolution>
            <p>This Pokémon does not evolve.</p>
          </ng-template>
        </div>

      </div>
    </div>
  </div>
